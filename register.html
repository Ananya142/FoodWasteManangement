<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Donate Food</title>
    <link rel="icon" href="./files/logo.png" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Paytone+One&family=Poppins:wght@100;200;300;400;500;600;700;800;900&family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/boxicons@latest/css/boxicons.min.css"
    />
    <script src="js/script.js"></script>
  </head>
  <body class="register-body">
    <nav>
      <img src="./files/logo.png" class="logo" alt="Logo" title="FoodYard" />

      <ul class="navbar" style="padding-left: 40px">
        <li>
          <a href="./index.html">Home</a>
          <a href="./index.html#fwmanage">What We Do</a>
          <a href="./register.html">Get Involved</a>
          <a href="./about.html">About Us</a>
          <a href="./contact.html">Contact Us</a>
          <a href="./dashboard.html">Dashboard</a>
        </li>
      </ul>
    </nav>

    <section class="registration">
      <div class="register-form">
        <h1>Donate <span>Food</span></h1>
        <p>It's not how much we give, but how much love we put into giving!</p>
        <br />
        <form action="" onsubmit="return handleDonationSubmit(event)">
          <input
            type="text"
            name="myname1"
            placeholder="Your Name"
            id="name"
            required
          />
          <input
            type="email"
            name="myemail"
            placeholder="Your Email"
            id="email"
            required
          />
          <input
            type="tel"
            name="myphone"
            placeholder="Your Phone No."
            id="phonenum"
            required
          />
          <input
            type="text"
            name="myadd"
            placeholder="Collection Address"
            id="address"
            required
          />
          <h4>Category</h4>
          <input type="radio" name="myfood" value="veg" id="veg" required /> Veg &nbsp; &nbsp;
          &nbsp; &nbsp; &nbsp; &nbsp;
          <input type="radio" name="myfood" value="nonveg" id="nonveg" /> Non-Veg &nbsp; &nbsp;
          &nbsp; &nbsp; &nbsp; &nbsp;
          <input type="radio" name="myfood" value="both" id="both" /> Both
          <h4>Quantity (in Kg)</h4>
          <input type="number" name="quantity" id="quantity" min="0.1" step="0.1" required />
          <h4>Food Preparation Date and Time</h4>
          <input type="datetime-local" name="fooddate" id="fooddate" required /> <br />
          <br />
          <textarea
            name="note"
            id="note"
            cols="2"
            rows="3"
            placeholder="Special Note"
          ></textarea>
          <br /><br />
          <input type="checkbox" name="t&c" id="terms" checked required /> I accept
          the Terms & Conditions.
          <br />
          <input type="submit" value="Submit" class="submitbtn" />
        </form>
      </div>
    </section>

    <!-- Footer -->

    <section class="footer">
      <div class="foot">
        <div class="footer-content">
          <div class="footlinks">
            <h4>Quick Links</h4>
            <ul>
              <li><a href="./register.html">Donate</a></li>
              <li><a href="./about.html">About Us</a></li>
              <li><a href="./contact.html">Contact Us</a></li>
            </ul>
          </div>

          <div class="footlinks">
            <h4>Connect</h4>
            <div class="social">
              <a href="" target="_blank"><i class="bx bxl-facebook"></i></a>
              <a href="" target="_blank"><i class="bx bxl-instagram"></i></a>
              <a href="" target="_blank"><i class="bx bxl-twitter"></i></a>
              <a href="" target="_blank"><i class="bx bxl-linkedin"></i></a>
              <a href="" target="_blank"><i class="bx bxl-youtube"></i></a>
              <a href="" target="_blank"><i class="bx bxl-wordpress"></i></a>
              <a href="" target="_blank"><i class="bx bxl-github"></i></a>
            </div>
          </div>
        </div>
      </div>

      <div class="end">
        <p>
          Tel: 1800-00-000 Email: support@foodyard.com | Copyright Â© 2023
          FoodYard | All Rights Reserved. <br />Website developed by: Ananya
          Goel | Sajal Aggarwal
        </p>
      </div>
    </section>

    <!-- Javascript -->
    <script>
      function handleDonationSubmit(event) {
        event.preventDefault();

        // Get form values
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const phone = document.getElementById('phonenum').value.trim();
        const address = document.getElementById('address').value.trim();
        const category = document.querySelector('input[name="myfood"]:checked')?.value;
        const quantity = document.getElementById('quantity').value;
        const foodDate = document.getElementById('fooddate').value;
        const note = document.getElementById('note').value.trim();
        const termsAccepted = document.getElementById('terms').checked;

        // Validation
        if (!validateName(name)) {
          showMessage('Please enter a valid name (at least 2 characters)', 'error');
          return false;
        }

        if (!validateEmail(email)) {
          showMessage('Please enter a valid email address', 'error');
          return false;
        }

        if (!validatePhone(phone)) {
          showMessage('Please enter a valid 10-digit phone number starting with 6-9', 'error');
          return false;
        }

        if (!address) {
          showMessage('Please enter a collection address', 'error');
          return false;
        }

        if (!category) {
          showMessage('Please select a food category', 'error');
          return false;
        }

        if (!quantity || quantity <= 0) {
          showMessage('Please enter a valid quantity greater than 0', 'error');
          return false;
        }

        if (!foodDate) {
          showMessage('Please select food preparation date and time', 'error');
          return false;
        }

        if (!termsAccepted) {
          showMessage('Please accept the Terms & Conditions', 'error');
          return false;
        }

        // Check if preparation time is in the future
        const prepDate = new Date(foodDate);
        const now = new Date();
        if (prepDate <= now) {
          showMessage('Food preparation date and time must be in the future', 'error');
          return false;
        }

        // Create donation object
        const donation = {
          name,
          email,
          phone,
          address,
          category,
          quantity: parseFloat(quantity),
          foodDate,
          note
        };

        // Add to manager
        const donationId = foodManager.addDonation(donation);

        // Show success message
        showMessage(`Thank you ${name}! Your donation request has been submitted successfully. Reference ID: ${donationId}`, 'success');

        // Reset form
        event.target.reset();

        return false;
      }
    </script>
  </body>
</html>
